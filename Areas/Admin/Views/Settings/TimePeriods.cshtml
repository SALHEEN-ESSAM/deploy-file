@model List<Amana.Models.Entities.StngTimePeriods>
@using Amana.GlobalResources;
@{
    Layout = "~/Areas/Admin/Views/Shared/_Layout2.cshtml";
    int c = Request["c"] != null ? int.Parse(Request["c"].ToString()) : 0;
}
@section sectionSubHeader{

    <div class="kt-subheader__main">
        <h3 class="kt-subheader__title">
            @Cpanel.Settings
        </h3>
        <span class="kt-subheader__separator kt-hidden"></span>
        <div class="kt-subheader__breadcrumbs">
            <a href="#" class="kt-subheader__breadcrumbs-home"><i class="flaticon2-shelter"></i></a>
            <span class="kt-subheader__breadcrumbs-separator"></span>
            @*<a href="" class="kt-subheader__breadcrumbs-link">
                    @Model.PropertyText
                </a>*@
        <span class="kt-subheader__breadcrumbs-link kt-subheader__breadcrumbs-link--active">  @Cpanel.ReportTimePeriods</span>
        </div>
    </div>
}
<div class="kt-portlet kt-portlet--mobile">
    <div class="kt-portlet__head kt-portlet__head--lg">
        <div class="kt-portlet__head-label">
            <span class="kt-portlet__head-icon">
                <i class="kt-font-brand flaticon2-line-chart"></i>
            </span>
            <h3 class="kt-portlet__head-title">
                @if (c == 1)
                {
                    <text>  @Cpanel.ClassificationPeriods </text>
                }
                else
                {
                    <text>  @Cpanel.ReportTimePeriods </text>
                }
            </h3>
        </div>
        <div class="kt-portlet__head-toolbar">
            <div class="kt-portlet__head-wrapper">
                <div class="kt-portlet__head-actions">
                    <a onclick="ShowFormsModal('@Url.Action("AddTimePeriod" , new {c = c})')" href="javascript:void();" class="btn btn-brand btn-elevate btn-icon-sm">
                        <i class="la la-plus"></i>
                        @Cpanel.Create
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="kt-portlet__body">
        @if (ViewBag.Success == true)
        {
            @Html.Partial("~/Areas/Admin/Views/Shared/UcSuccess.cshtml")
        }
        <!--begin: Datatable -->
        @if (Model.Count > 0)
        {
            <table class="table table-striped- table-bordered table-hover table-checkable" id="kt_table_1">
                <thead>
                    <tr>
                        <th>@Amana.GlobalResources.Cpanel.Title</th>
                        <th>@Cpanel.From</th>
                        <th>@Cpanel.To</th>
                        <th>@Cpanel.CurrentPeriod</th>
                        <th>
                            

                        </th>
                    </tr>
                </thead>
                <tbody>
                    @{
                        int i = 0;
                        foreach (var item in Model)
                        {
                            i++;
                            <tr>
                                <td>
                                    @item.Title
                                </td>
                                <td>
                                    @item.StartDate.ToString("dd / MM / yyyy")
                                </td>
                                <td>
                                    @item.EndDate.ToString("dd / MM / yyyy")
                                </td>
                                <td>
                                    <span style="color:green;font-weight:bold;">  @(item.IsCurrentPeriod ? Cpanel.CurrentPeriod : "")</span>
                                </td>
                                <td nowrap>
                                    <a onclick="ShowFormsModal('@Url.Action("AddTimePeriod",new {id=item.TimePeriodId , c=c})')" href="javascript:void();">
                                        @Cpanel.Edit
                                    </a>
                                    |
                                    <a href="@Url.Action("DeleteTimePeriod", new { id = item.TimePeriodId })" onclick="return confirm('سيتم الحذف, هل أنت متاكد ؟');">@Amana.GlobalResources.Cpanel.Delete</a>
                                </td>
                            </tr>
                        }
                    }

                </tbody>
            </table>
        }
        <!--end: Datatable -->
    </div>
</div>

@section sectionScripts{
 

    <script>
        "use strict";
        var KTDatatablesDataSourceHtml = function () {
            var initTable1 = function () {
                var table = $('#kt_table_1');

                // begin first table
                table.DataTable({
                    responsive: true,
                    columnDefs: [

                    ],
                });

            };
            return {

                //main function to initiate the module
                init: function () {
                    initTable1();
                },
            };
        }();

        $(document).ready(function () {

            KTDatatablesDataSourceHtml.init();

            $("#liSettings").addClass("kt-menu__item--open");
            $("#liClassificationSettings").addClass("kt-menu__item--open");
        });
    </script>
}





